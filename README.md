# web-api
###### version: 1.0.1
Шаблон сервиса, на основе которого создаются новые golang-сервисы.

## Миграции
Миграции происходят автоматически при старте приложения

### Создание миграций
Для создания миграций необходимо установить пакет golang-migrate

```migrate create -ext sql -dir ./internal/app/migrations -seq <Название миграции>```

**Название миграции должно:**
- Быть уникальным
- Понятным, что в ней происходит

**Запрещено редактировать существующие миграции, только добавлять**

---

## Для разработчиков

Для удобства разработки сервисов, в каждом сервисе должна присутствовать папка ```dev```.

Содержание dev-папки:
- ```docker-compose.yml``` — содержит в себе необходимые для разработки сервисы (например, БД pgsql)
- ```.env``` — файл окружения, для загрузки параметров окружения
- ```<Папка с данными БД>``` — содержит в себе данные БД. На каждую БД своя папка
(в шаблоне при запуске контейнера создается папка ```pgdata```)

---
### Тестирование 
Для тестирования используем табличные тесты. Однако в некоторых случаях можно применять [testify/suite](https://github.com/stretchr/testify/#user-content-suite-package)

Пример можно посмотреть в тесте _router_'а в пакете ```internal/api/http```.

В качестве примера в пакете ```internal/api/grpc``` оставлено покрытие табличными, хотя там можно реализовать на ```testify/suite```.